

steps:
# Step 2: Fetch the GitHub token from Secret Manager and create a GitHub release
  - name: 'gcr.io/cloud-builders/git'
    entrypoint: 'bash'
    secretEnv: ['git_token']
    args:
      - '-c'
      - |
        echo $git_token
        echo $git_token | gh auth login --with-token

        # Create a new GitHub release
        gh release create v1.0.0 --title 'Initial_release' --notes 'Initial_release'

# substitutions:
# _TAG_NAME: 'v1.0.0'
# _RELEASE_TITLE: 'Initial Release'
# _RELEASE_NOTES: 'Release notes for the initial release.'

availableSecrets:
  secretManager:
  - versionName: projects/sai-sandbox-20240119/secrets/github_token/versions/1
    env: 'git_token'

options: 
  logging: CLOUD_LOGGING_ONLY